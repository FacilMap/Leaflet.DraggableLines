!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("leaflet"),require("leaflet-geometryutil")):"function"==typeof define&&define.amd?define(["leaflet","leaflet-geometryutil"],t):"object"==typeof exports?exports.L=t(require("leaflet"),require("leaflet-geometryutil")):(e.L=e.L||{},e.L.DraggableLines=t(e.L,e.L.GeometryUtil))}(self,(function(e,t){return(()=>{"use strict";var r={102:function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(453),l=a(r(7)),u=r(700),h=a(r(743)),d=a(r(523)),c=a(r(83)),p=r(593),g=function(e){function t(t,r){var o=e.call(this,t)||this;return o.handleLayerAdd=function(e){e.layer instanceof s.Polyline&&o.shouldEnableForLayer(e.layer)&&o.enableForLayer(e.layer)},o.handleLayerRemove=function(e){e.layer instanceof s.Polyline&&o.disableForLayer(e.layer)},o.handleLayerMouseOver=function(e){s.Draggable._dragging||o.drawTempMarker(e.target,e.latlng)},o.handleLayerSetLatLngs=function(e){var t=e.target;s.Draggable._dragging||(o.removeTempMarker(),t._draggableLines&&(o.drawDragMarkers(t),o.drawPlusMarkers(t)))},o.options=i({enableForLayer:function(e){return e.options.interactive},allowExtendingLine:!0,removeOnClick:!0},r),o}return n(t,e),t.prototype.addHooks=function(){var e=this;this._map.on("layeradd",this.handleLayerAdd),this._map.on("layerremove",this.handleLayerRemove),this._map.eachLayer((function(t){e.handleLayerAdd({layer:t})}))},t.prototype.removeHooks=function(){var e=this;this._map.on("layeradd",this.handleLayerAdd),this._map.on("layerremove",this.handleLayerRemove),this._map.eachLayer((function(t){e.handleLayerRemove({layer:t})}))},t.prototype.shouldEnableForLayer=function(e){return"function"==typeof this.options.enableForLayer?this.options.enableForLayer(e):"boolean"==typeof this.options.enableForLayer?this.options.enableForLayer:Array.isArray(this.options.enableForLayer)?this.options.enableForLayer.includes(e):this.options.enableForLayer===e},t.prototype.drawDragMarkers=function(e){var t,r;if(e._draggableLines){this.removeDragMarkers(e);for(var o=e.getDraggableLinesRoutePoints()||e.getLatLngs(),n=s.LineUtil.isFlat(o)?[o]:o,a=s.LineUtil.isFlat(o),l=0;l<n.length;l++)for(var d=0;d<n[l].length;d++){var c=a?d:[l,d],p=this.options.removeOnClick,g=i({icon:e instanceof s.Polygon?u.defaultIcon:0==d?u.startIcon:d==n[l].length-1?u.endIcon:u.defaultIcon},null===(r=(t=this.options).dragMarkerOptions)||void 0===r?void 0:r.call(t,e,d,n[l].length)),f=new h.default(this,e,n[l][d],c,g,p).addTo(this._map);e._draggableLines.dragMarkers.push(f)}}},t.prototype.removeDragMarkers=function(e){if(e._draggableLines){for(var t=0,r=e._draggableLines.dragMarkers;t<r.length;t++)r[t].removeFrom(this._map);e._draggableLines.dragMarkers=[]}},t.prototype.drawPlusMarkers=function(e){var t,r,o,n;if(this.removePlusMarkers(e),!(e instanceof s.Polygon)&&e._draggableLines&&this.options.allowExtendingLine)for(var a=e.getLatLngs(),l=s.LineUtil.isFlat(a)?[a]:a,h=e.getDraggableLinesRoutePoints(),c=0;c<l.length;c++)if(!(l[c].length<2))for(var g=0,f=[!0,!1];g<f.length;g++){var y,_=f[g];y=h?_?0:h.length:s.LineUtil.isFlat(a)?_?0:l[c].length:_?[c,0]:[c,l[c].length];var v=i({icon:u.plusIcon},null===(r=(t=this.options).plusMarkerOptions)||void 0===r?void 0:r.call(t,e,_)),m=i({icon:_?u.startIcon:u.endIcon},null===(n=(o=this.options).plusTempMarkerOptions)||void 0===n?void 0:n.call(o,e,_)),L=new d.default(this,e,p.getPlusIconPoint(this._map,l[c],24+e.options.weight/2,_),y,v,m).addTo(this._map);e._draggableLines.plusMarkers.push(L)}},t.prototype.removePlusMarkers=function(e){if(e._draggableLines){for(var t=0,r=e._draggableLines.plusMarkers;t<r.length;t++)r[t].removeFrom(this._map);e._draggableLines.plusMarkers=[]}},t.prototype.drawTempMarker=function(e,t){var r,o;this.removeTempMarker();var n=i({icon:u.defaultIcon},null===(o=(r=this.options).tempMarkerOptions)||void 0===o?void 0:o.call(r,e));this._tempMarker=new c.default(this,e,l.default.closest(this._map,e,t),n).addTo(this._map)},t.prototype.removeTempMarker=function(){this._tempMarker&&(this._tempMarker.removeFrom(this._map),delete this._tempMarker)},t.prototype.enableForLayer=function(e){var t=this;e._draggableLines||(e._draggableLines={dragMarkers:[],plusMarkers:[],zoomEndHandler:function(){t.drawPlusMarkers(e)}},e.on("mouseover",this.handleLayerMouseOver),e.on("draggableLines-setLatLngs",this.handleLayerSetLatLngs),e.on("draggableLines-setRoutePoints",this.handleLayerSetLatLngs),this._map.on("zoomend",e._draggableLines.zoomEndHandler),this.drawDragMarkers(e),this.drawPlusMarkers(e))},t.prototype.redrawForLayer=function(e){e._draggableLines&&(this.drawDragMarkers(e),this.drawPlusMarkers(e),this._tempMarker&&this._tempMarker._layer===e&&this.drawTempMarker(e,this._tempMarker.getLatLng()))},t.prototype.disableForLayer=function(e){e.off("mouseover",this.handleLayerMouseOver),e.off("draggableLines-setLatLngs",this.handleLayerSetLatLngs),e.off("draggableLines-setRoutePoints",this.handleLayerSetLatLngs),e._draggableLines&&this._map.off("zoomend",e._draggableLines.zoomEndHandler),this.removeDragMarkers(e),this.removePlusMarkers(e),delete e._draggableLines},t.prototype.redraw=function(){var e=this;this._map.eachLayer((function(t){if(t instanceof s.Polyline){var r=e.shouldEnableForLayer(t);t._draggableLines&&!r?e.disableForLayer(t):!t._draggableLines&&r?e.enableForLayer(t):t._draggableLines&&e.redrawForLayer(t)}}))},t}(s.Handler);t.default=g,Object.assign(g.prototype,s.Evented.prototype)},607:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DraggableLines=t.DraggableLinesPlusMarker=t.DraggableLinesTempMarker=t.DraggableLinesDragMarker=t.DraggableLinesMarker=void 0;var u=l(r(102));r(364);var h=a(r(593)),d=a(r(700)),c=l(r(529));t.DraggableLinesMarker=c.default;var p=l(r(743));t.DraggableLinesDragMarker=p.default;var g=l(r(83));t.DraggableLinesTempMarker=g.default;var f=a(r(523));t.DraggableLinesPlusMarker=f.default,s(r(593),t),s(r(700),t),t.default=u.default,t.DraggableLines=Object.assign(u.default,o(o({},h),{icons:d,Marker:c.default,DragMarker:p.default,TempMarker:g.default,PlusMarker:f.default,PlusTempMarker:f.DraggableLinesPlusTempMarker}))},364:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=r(453);o.Polyline.prototype.hasDraggableLinesRoutePoints=function(){return null!=this.options.draggableLinesRoutePoints},o.Polyline.prototype.getDraggableLinesRoutePoints=function(){var e;return null===(e=this.options.draggableLinesRoutePoints)||void 0===e?void 0:e.map((function(e){return o.latLng(e)}))},o.Polyline.prototype.setDraggableLinesRoutePoints=function(e){this.options.draggableLinesRoutePoints=e,this.fire("draggableLines-setRoutePoints")};var n=o.Polyline.prototype.setLatLngs;o.Polyline.prototype.setLatLngs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.apply(this,e);return this.fire("draggableLines-setLatLngs"),r}},743:function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(453),l=r(593),u=function(e){function t(t,r,o,n,a,s){var l=e.call(this,t,r,o,!1,i({draggable:!0},a))||this;return l._idx=n,l._removeOnClick=s,l}return n(t,e),t.prototype.onAdd=function(t){var r=this;e.prototype.onAdd.call(this,t);var o=this._layer.getDraggableLinesRoutePoints()||this._layer.getLatLngs(),n=Array.isArray(this._idx)?o[this._idx[0]]:o;return this._removeOnClick&&n.length>(this._layer instanceof s.Polygon?3:2)&&this.on("click",this.handleClick),this.on("mouseover",(function(){r._draggable.fire("dragmouseover",{layer:r._layer,idx:r._idx,marker:r})})),this.on("mouseout",(function(){r._draggable.fire("dragmouseout",{layer:r._layer,idx:r._idx,marker:r})})),this},t.prototype.getIdx=function(){return this._idx},t.prototype.handleClick=function(){var e=this.getIdx();l.removePoint(this._layer,e),this._draggable.fire("remove",{layer:this._layer,idx:e})},t}(a(r(529)).default);t.default=u},700:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.plusIcon=t.endIcon=t.startIcon=t.defaultIcon=void 0;var n=r(453),i=o(r(306)),a=o(r(5)),s=n.Icon.Default.prototype._detectIconPath();function l(e){for(var t=i.default,r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];t=t.replace(new RegExp("%24%7b"+a+"%7d","g"),encodeURIComponent(e[a]))}return new n.Icon.Default({imagePath:new String(""),iconUrl:t,iconRetinaUrl:t,shadowUrl:s+"marker-shadow.png"})}t.defaultIcon=l({color1:"#2e6c97",color2:"#3883b7",color3:"#126fc6",color4:"#4c9cd1"}),t.startIcon=l({color1:"#2E9749",color2:"#06EA3F",color3:"#03D337",color4:"#40DD68"}),t.endIcon=l({color1:"#972E2E",color2:"#B73838",color3:"#C61212",color4:"#D14C4C"}),t.plusIcon=new n.Icon({iconUrl:a.default,iconSize:[24,24],iconAnchor:[12,12]})},529:function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(453),a=r(593),s=function(e){function t(t,r,o,n,i){var a=e.call(this,o,i)||this;return a._draggable=t,a._layer=r,a._isInsert=n,a}return n(t,e),t.prototype.onAdd=function(t){return e.prototype.onAdd.call(this,t),this.on("dragstart",this.handleDragStart,this),this.on("drag",this.handleDrag,this),this.on("dragend",this.handleDragEnd,this),this},t.prototype.onRemove=function(t){return e.prototype.onRemove.call(this,t),this},t.prototype.handleDragStart=function(e){var t=this.getLatLng();this._dragFrom=t,this._dragIdx=this.getIdx(),a.setPoint(this._layer,t,this._dragIdx,this._isInsert),this._draggable.fire("dragstart",{layer:this._layer,from:t,to:t,idx:this._dragIdx,isNew:this._isInsert})},t.prototype.handleDrag=function(){var e=this.getLatLng();a.setPoint(this._layer,e,this._dragIdx,!1),this._draggable.fire("drag",{layer:this._layer,from:this._dragFrom,to:e,idx:this._dragIdx,isNew:this._isInsert})},t.prototype.handleDragEnd=function(){var e=this,t={layer:this._layer,from:this._dragFrom,to:this.getLatLng(),idx:this._dragIdx,isNew:this._isInsert};Promise.resolve().then((function(){a.setPoint(t.layer,t.to,t.idx,!1),e._draggable.fire("dragend",t)}))},t}(i.Marker);t.default=s},523:function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DraggableLinesPlusTempMarker=void 0;var s=r(453),l=a(r(529)),u=a(r(83)),h=function(e){function t(t,r,o,n,a,s){var l=e.call(this,t,r,o,!0,i({pane:"overlayPane",zIndexOffset:-2e5},a))||this;return l._idx=n,l._tempMarkerOptions=s,l}return n(t,e),t.prototype.onAdd=function(t){return e.prototype.onAdd.call(this,t),this.on("mouseover",this.handleMouseOver,this),this},t.prototype.onRemove=function(t){return e.prototype.onRemove.call(this,t),this._tempMarker&&(this._tempMarker.remove(),delete this._tempMarker),this},t.prototype.getIdx=function(){return this._idx},t.prototype.handleMouseOver=function(e){this._draggable.removeTempMarker(),this._tempMarker=new d(this._draggable,this._layer,this,e.latlng,this.getIdx(),this._tempMarkerOptions).addTo(this._map),this._draggable._tempMarker=this._tempMarker},t}(l.default);t.default=h;var d=function(e){function t(t,r,o,n,i,a){var s=e.call(this,t,r,n,a)||this;return s._plusMarker=o,s._idx=i,s}return n(t,e),t.prototype.getIdx=function(){return this._idx},t.prototype.shouldRemove=function(e){var t=this._map.latLngToLayerPoint(e),r=s.DomUtil.getPosition(this._plusMarker._icon);return Math.abs(r.y-t.y)>this._plusMarker._icon.offsetHeight/2||Math.abs(r.x-t.x)>this._plusMarker._icon.offsetWidth/2},t.prototype.getRenderPoint=function(){return this.getLatLng()},t.prototype.fireMouseOver=function(){this._draggable.fire("plusmouseover",{layer:this._layer,idx:this.getIdx(),marker:this,plusMarker:this._plusMarker})},t.prototype.fireMouseMove=function(){},t.prototype.fireMouseOut=function(){this._draggable.fire("plusmouseout",{layer:this._layer,idx:this.getIdx(),marker:this,plusMarker:this._plusMarker})},t}(u.default);t.DraggableLinesPlusTempMarker=d},83:function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(453),l=r(593);function u(e,t){var r=s.Util.create(t),o=r._setIconStyles;return r._setIconStyles=function(t,n){o.call(r,t,n);var i=2*e.options.weight;t.style.padding=i+"px",t.style.marginLeft=parseInt(t.style.marginLeft)-i+"px",t.style.marginTop=parseInt(t.style.marginTop)-i+"px"},r}var h=function(e){function t(t,r,o,n){return e.call(this,t,r,o,!0,i(i({draggable:!0,zIndexOffset:-1e5},n),{icon:u(r,n.icon)}))||this}return n(t,e),t.prototype.onAdd=function(t){return e.prototype.onAdd.call(this,t),t.on("mousemove",this.handleMapMouseMove,this),s.DomEvent.on(t.getContainer(),"mouseover",this.handleMapMouseOver,this),this.on("click",this.handleClick,this),this.fireMouseOver(),this},t.prototype.onRemove=function(t){return this.isHidden()||this.fireMouseOut(),e.prototype.onRemove.call(this,t),t.off("mousemove",this.handleMapMouseMove,this),s.DomEvent.off(t.getContainer(),"mouseover",this.handleMapMouseOver,this),this},t.prototype.show=function(){this._icon.style.display="",this._shadow&&(this._shadow.style.display=""),this.fireMouseOver()},t.prototype.hide=function(){this._icon.style.display="none",this._shadow&&(this._shadow.style.display="none"),this.fireMouseOut()},t.prototype.isHidden=function(){return"none"==this._icon.style.display},t.prototype.getIdx=function(){var e=this.getLatLng();return this._layer.hasDraggableLinesRoutePoints()?l.getRouteInsertPosition(this._map,this._layer.getDraggableLinesRoutePoints(),this._layer.getLatLngs(),e):l.getInsertPosition(this._map,this._layer.getLatLngs(),e,this._layer instanceof s.Polygon)},t.prototype.handleClick=function(){var e=this.getLatLng(),t=this.getIdx();l.setPoint(this._layer,e,t,!0),this._draggable.fire("insert",{layer:this._layer,latlng:e,idx:t})},t.prototype.shouldRemove=function(e){return!this._layer._containsPoint(this._map.latLngToLayerPoint(e))},t.prototype.getRenderPoint=function(e){var t=s.GeometryUtil.closest(this._map,this._layer,e);if(!(t.distance>this._layer.options.weight/2+1))return s.latLng(t)},t.prototype.handleMapMouseMove=function(e){if(!s.Draggable._dragging)if(this.shouldRemove(this._map.mouseEventToLatLng(e.originalEvent)))this.remove();else{var t=this.getRenderPoint(this._map.mouseEventToLatLng(e.originalEvent));t&&this.setLatLng(t);var r=!this.isHidden();t&&!r?this.show():!t&&r?this.hide():r&&this.fireMouseMove()}},t.prototype.handleMapMouseOver=function(e){s.Draggable._dragging||e.target===this.getElement()||e.target===this._layer.getElement()||this.remove()},t.prototype.fireMouseOver=function(){this._draggable.fire("tempmouseover",{layer:this._layer,idx:this.getIdx(),marker:this,latlng:this.getLatLng()})},t.prototype.fireMouseMove=function(){this._draggable.fire("tempmousemove",{layer:this._layer,idx:this.getIdx(),marker:this,latlng:this.getLatLng()})},t.prototype.fireMouseOut=function(){this._draggable.fire("tempmouseout",{layer:this._layer,idx:this.getIdx(),marker:this,latlng:this.getLatLng()})},t}(a(r(529)).default);t.default=h},593:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,n++)o[n]=i[a];return o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPlusIconPoint=t.removePoint=t.setPoint=t.removeFromPosition=t.updateAtPosition=t.insertAtPosition=t.getFromPosition=t.getRouteInsertPosition=t.getInsertPosition=void 0;var l=i(r(453)),u=s(r(7));function h(e,t,r){var o=Array.isArray(r)?r:[r];if(0===o.length)return e;if(1===o.length)return a(e.slice(0,o[0]),[t],e.slice(o[0]));var n=a(e);return n[o[0]]=h(n[o[0]],t,o.slice(1)),n}function d(e,t,r){var o=Array.isArray(r)?r:[r];if(0===o.length)return e;if(1===o.length)return a(e.slice(0,o[0]),[t],e.slice(o[0]+1));var n=a(e);return n[o[0]]=d(n[o[0]],t,o.slice(1)),n}function c(e,t){var r=Array.isArray(t)?t:[t];if(0===r.length)return e;if(1===r.length)return a(e.slice(0,r[0]),e.slice(r[0]+1));var o=a(e);return o[r[0]]=c(o[r[0]],r.slice(1)),o}t.getInsertPosition=function e(t,r,o,n){if(void 0===n&&(n=!1),!l.LineUtil.isFlat(r)){for(var i=void 0,s=0;s<r.length;s++){var h=n?l.default.polygon(r[s]):l.default.polyline(r[s]),d=u.default.closest(t,h,o).distance;(!i||d<i.distance)&&(i={distance:d,i:s})}return i?[i.i,e(t,r[i.i],o,n)]:[0,0]}var c=l.default.polyline(n?a(r,[r[0]]):r),p=u.default.locateOnLine(t,c,o),g=l.default.GeometryUtil.extract(t,c,0,p).length-1;return n||(g=Math.max(1,Math.min(r.length-1,g))),g},t.getRouteInsertPosition=function(e,t,r,o){for(var n=l.default.polyline(r),i=u.default.locateOnLine(e,n,o),a=0;a<t.length;a++)if(u.default.locateOnLine(e,n,t[a])>i)return a;return t.length},t.getFromPosition=function(e,t){return Array.isArray(t)?e[t[0]][t[1]]:e[t]},t.insertAtPosition=h,t.updateAtPosition=d,t.removeFromPosition=c,t.setPoint=function(e,t,r,o){var n=e.hasDraggableLinesRoutePoints(),i=n?e.getDraggableLinesRoutePoints():e.getLatLngs();i=o?h(i,t,r):d(i,t,r),n?e.setDraggableLinesRoutePoints(i):e.setLatLngs(i)},t.removePoint=function(e,t){var r=e.hasDraggableLinesRoutePoints(),o=r?e.getDraggableLinesRoutePoints():e.getLatLngs();o=c(o,t),r?e.setDraggableLinesRoutePoints(o):e.setLatLngs(o)},t.getPlusIconPoint=function(e,t,r,o){var n,i=o?t:a(t).reverse(),s=e.latLngToContainerPoint(i[0]),u=i.find((function(t,r){return r>0&&s.distanceTo(e.latLngToContainerPoint(t))>0}));if(u){var h=e.latLngToContainerPoint(u),d=r/s.distanceTo(h);n=l.default.point(s.x-d*(h.x-s.x),s.y-d*(h.y-s.y))}else n=l.default.point(s.x+(o?-1:1)*r,s.y);return e.containerPointToLatLng(n)}},306:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});const o="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='25.1' height='40.227'%3e %3cdefs%3e %3clinearGradient id='b'%3e %3cstop offset='0' stop-color='%24%7bcolor1%7d' /%3e %3cstop offset='1' stop-color='%24%7bcolor2%7d' /%3e %3c/linearGradient%3e %3clinearGradient id='a'%3e %3cstop offset='0' stop-color='%24%7bcolor3%7d' /%3e %3cstop offset='1' stop-color='%24%7bcolor4%7d' /%3e %3c/linearGradient%3e %3clinearGradient xlink:href='%23a' id='c' gradientUnits='userSpaceOnUse' gradientTransform='translate(-432.796 -503.349)' x1='445.301' y1='541.286' x2='445.301' y2='503.72' /%3e %3clinearGradient xlink:href='%23b' id='d' gradientUnits='userSpaceOnUse' gradientTransform='translate(-341.216 -503.35)' x1='351.748' y1='522.774' x2='351.748' y2='503.721' /%3e %3c/defs%3e %3cpath fill='white' d='M6.329 4.513h12.625v14.5H6.329z' /%3e %3cpath d='M12.594.55C6.021.55.55 6.241.55 12.416c0 2.778 1.564 6.308 2.694 8.746l9.306 17.872 9.262-17.872c1.13-2.438 2.738-5.791 2.738-8.746C24.55 6.241 19.167.55 12.594.55zm0 7.155a4.714 4.714 0 0 1 4.679 4.71c0 2.588-2.095 4.663-4.679 4.679-2.584-.017-4.679-2.09-4.679-4.679a4.714 4.714 0 0 1 4.679-4.71z' fill='url(%23c)' stroke='url(%23d)' stroke-width='1.1' stroke-linecap='round' /%3e %3cpath d='M12.581 1.657c-5.944 0-10.938 5.219-10.938 10.75 0 2.359 1.443 5.832 2.563 8.25l.031.031 8.313 15.969 8.25-15.969.031-.031c1.135-2.448 2.625-5.706 2.625-8.25 0-5.538-4.931-10.75-10.875-10.75zm0 4.969c3.168.021 5.781 2.601 5.781 5.781 0 3.18-2.613 5.761-5.781 5.781-3.168-.02-5.75-2.61-5.75-5.781 0-3.172 2.582-5.761 5.75-5.781z' stroke='white' stroke-width='1.1' stroke-linecap='round' stroke-opacity='.122' fill='none' /%3e %3c/svg%3e"},5:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});const o="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3e %3cg transform='matrix(.02604 0 0 .02604 1.302 1.302)' fill='none' stroke='black' opacity='0.3'%3e %3ccircle cx='410.9' cy='410.9' r='410.9' color='black' overflow='visible' stroke-width='100' /%3e %3cpath d='M410.9 223.2v375.4M598.6 410.9H223.2' stroke-width='120' stroke-linecap='round' /%3e %3c/g%3e %3c/svg%3e"},453:t=>{t.exports=e},7:e=>{e.exports=t}},o={};function n(e){if(o[e])return o[e].exports;var t=o[e]={exports:{}};return r[e].call(t.exports,t,t.exports,n),t.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})().DraggableLines}));
//# sourceMappingURL=L.DraggableLines.js.map